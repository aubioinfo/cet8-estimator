<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>è‹±è¯­ä¸“å…«ä¼°åˆ†å°å·¥å…·</title>
  <style>
    body {
      font-family: sans-serif;
      background-color: #ffffff;
      color: #333333;
      padding: 20px;
      max-width: 700px;
      margin: auto;
      transition: background-color 0.5s, color 0.5s;
    }

    h1 {
      text-align: center;
      color: #007acc;
    }

    label {
      display: block;
      margin-top: 15px;
    }

    input, button, select {
      padding: 10px;
      width: 100%;
      margin-top: 5px;
      border-radius: 5px;
      border: 1px solid #ccc;
      background: #ffffff;
      color: #333333;
    }

    button {
      background-color: #007acc;
      color: white;
      border: none;
      cursor: pointer;
      transition: background-color 0.3s;
      margin-top: 10px;
    }

    button:hover {
      background-color: #005fa3;
    }

    .result {
      margin-top: 20px;
      background: #f5f5f5;
      padding: 15px;
      border-radius: 8px;
      border: 1px solid #ddd;
    }

    .card {
      background: #ffffff;
      color: #333333;
      padding: 20px;
      border-radius: 10px;
      margin-top: 20px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      text-align: center;
      animation: fadeIn 0.8s ease-in-out;
    }

    .section {
      margin-top: 40px;
      padding-top: 20px;
      border-top: 2px dashed #ccc;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <h1>è‹±è¯­ä¸“å…«ä¼°åˆ†å™¨</h1>

  <label for="modeSelect">è¯·é€‰æ‹©ä¼°åˆ†æ–¹å¼ï¼š</label>
  <select id="modeSelect" onchange="toggleMode()">
    <option value="byModule">æŒ‰é¢˜å‹ä¼°åˆ†</option>
    <option value="byTotal">ç›´æ¥è¾“å…¥æ€»åˆ†</option>
  </select>

  <div id="moduleMode">
    <label for="listeningFill">å¬åŠ›å¡«ç©ºé¢˜ï¼ˆ15åˆ†ï¼‰ï¼š</label>
    <input type="number" id="listeningFill" placeholder="å¦‚ï¼š12">

    <label for="listeningChoice">å¬åŠ›é€‰æ‹©é¢˜ï¼ˆ10åˆ†ï¼‰ï¼š</label>
    <input type="number" id="listeningChoice" placeholder="å¦‚ï¼š8">

    <label for="readingChoice">é˜…è¯»é€‰æ‹©é¢˜ï¼ˆ14åˆ†ï¼‰ï¼š</label>
    <input type="number" id="readingChoice" placeholder="å¦‚ï¼š10">

    <label for="readingShort">é˜…è¯»ç®€ç­”é¢˜ï¼ˆ16åˆ†ï¼‰ï¼š</label>
    <input type="number" id="readingShort" placeholder="å¦‚ï¼š12">

    <label for="errorCorrection">æ”¹é”™é¢˜ï¼ˆ10åˆ†ï¼‰ï¼š</label>
    <input type="number" id="errorCorrection" placeholder="å¦‚ï¼š7">

    <label for="translation">ç¿»è¯‘é¢˜ï¼ˆ15åˆ†ï¼‰ï¼š</label>
    <input type="number" id="translation" placeholder="å¦‚ï¼š13">

    <label for="writing">å†™ä½œé¢˜ï¼ˆ20åˆ†ï¼‰ï¼š</label>
    <input type="number" id="writing" placeholder="å¦‚ï¼š16">

    <button onclick="calculateFinalScore()">ğŸ“Š æŒ‰æ¨¡å—è®¡ç®—æœ€ç»ˆåˆ†æ•°</button>
    <button onclick="generateCard()">ğŸ´ ç”Ÿæˆåˆ†äº«å¡ç‰‡</button>
  </div>

  <div class="section" id="totalMode" style="display: none;">
    <label for="totalEstimate">è¯·è¾“å…¥ä½ çš„æ€»é¢„ä¼°åˆ†ï¼ˆæ»¡åˆ†100ï¼‰ï¼š</label>
    <input type="number" id="totalEstimate" placeholder="å¦‚ï¼š70">
    <button onclick="calculateFromTotal()">ğŸ“ˆ ç›´æ¥ä¼°ç®—æœ€ç»ˆæˆç»©</button>
    <button onclick="generateCardFromTotal()">ğŸ´ ç”Ÿæˆåˆ†äº«å¡ç‰‡</button>
  </div>

  <div class="result" id="output" style="display: none;"></div>
  <div class="card" id="card" style="display: none;"></div>

  <script>
    function toggleMode() {
      const mode = document.getElementById("modeSelect").value;
      document.getElementById("moduleMode").style.display = mode === "byModule" ? "block" : "none";
      document.getElementById("totalMode").style.display = mode === "byTotal" ? "block" : "none";
      document.getElementById("output").style.display = "none";
      document.getElementById("card").style.display = "none";
    }

    function calculateFinalScore() {
      const scores = [
        parseFloat(document.getElementById("listeningFill").value) || 0,
        parseFloat(document.getElementById("listeningChoice").value) || 0,
        parseFloat(document.getElementById("readingChoice").value) || 0,
        parseFloat(document.getElementById("readingShort").value) || 0,
        parseFloat(document.getElementById("errorCorrection").value) || 0,
        parseFloat(document.getElementById("translation").value) || 0,
        parseFloat(document.getElementById("writing").value) || 0
      ];
      const estimatedScore = scores.reduce((a, b) => a + b, 0);
      const X = 100 - estimatedScore;
      const finalScore = 0.7 * (140 - X);
      const roundedScore = Math.round(finalScore * 10) / 10;
      const output = document.getElementById("output");
      output.style.display = "block";
      output.innerHTML = `ä½ ä¼°çš„æ€»åŸå§‹åˆ†ä¸º <strong>${estimatedScore}</strong>ï¼Œä½ çš„æœ€ç»ˆæˆç»©å¯èƒ½æ˜¯ <strong>${roundedScore}</strong> åˆ†ã€‚<br><br><em>æœ€ç»ˆæˆç»©ä»¥å®˜æ–¹ä¸ºå‡†ã€‚</em>`;
    }

    function calculateFromTotal() {
      const total = parseFloat(document.getElementById("totalEstimate").value);
      if (isNaN(total) || total < 0 || total > 100) {
        alert("è¯·è¾“å…¥ 0 åˆ° 100 ä¹‹é—´çš„æœ‰æ•ˆé¢„ä¼°åˆ†æ•°ã€‚");
        return;
      }
      const X = 100 - total;
      const finalScore = 0.7 * (140 - X);
      const roundedScore = Math.round(finalScore * 10) / 10;
      const output = document.getElementById("output");
      output.style.display = "block";
      output.innerHTML = `ä½ è¾“å…¥çš„æ€»é¢„ä¼°åˆ†ä¸º <strong>${total}</strong>ï¼Œä½ çš„æœ€ç»ˆæˆç»©å¯èƒ½æ˜¯ <strong>${roundedScore}</strong> åˆ†ã€‚<br><br><em>æœ€ç»ˆæˆç»©ä»¥å®˜æ–¹ä¸ºå‡†ã€‚</em>`;
    }

    function generateCard() {
      const listeningFill = parseFloat(document.getElementById("listeningFill").value) || 0;
      const listeningChoice = parseFloat(document.getElementById("listeningChoice").value) || 0;
      const readingChoice = parseFloat(document.getElementById("readingChoice").value) || 0;
      const readingShort = parseFloat(document.getElementById("readingShort").value) || 0;
      const errorCorrection = parseFloat(document.getElementById("errorCorrection").value) || 0;
      const translation = parseFloat(document.getElementById("translation").value) || 0;
      const writing = parseFloat(document.getElementById("writing").value) || 0;
      const estimatedScore = listeningFill + listeningChoice + readingChoice + readingShort + errorCorrection + translation + writing;
      const X = 100 - estimatedScore;
      const finalScore = 0.7 * (140 - X);
      const roundedScore = Math.round(finalScore * 10) / 10;
      const card = document.getElementById("card");
      card.style.display = "block";
      card.innerHTML = `
        <h2>ğŸ“ æˆ‘çš„ä¸“å…«ç„å­¦ä¼°åˆ†å¡</h2>
        <p>å¬åŠ›å¡«ç©ºé¢˜ï¼š${listeningFill} / 15</p>
        <p>å¬åŠ›é€‰æ‹©é¢˜ï¼š${listeningChoice} / 10</p>
        <p>é˜…è¯»é€‰æ‹©é¢˜ï¼š${readingChoice} / 14</p>
        <p>é˜…è¯»ç®€ç­”é¢˜ï¼š${readingShort} / 16</p>
        <p>æ”¹é”™é¢˜ï¼š${errorCorrection} / 10</p>
        <p>ç¿»è¯‘é¢˜ï¼š${translation} / 15</p>
        <p>å†™ä½œé¢˜ï¼š${writing} / 20</p>
        <hr>
        <h3>ğŸ§® åŸå§‹æ€»åˆ†ï¼š${estimatedScore}</h3>
        <h3>ğŸ“Š é¢„æµ‹æœ€ç»ˆæˆç»©ï¼š${roundedScore}</h3>
        <p style="font-size: 12px; color: #999; margin-top: 10px;">ä½œè€…ï¼šæ›¦æ›¦ ï½œ å°çº¢ä¹¦å·ï¼š604003678 ï¼ˆåˆ†äº«èµ„æ–™Freeï¼‰</p>
        <button onclick="copyXHS()" style="margin-top: 8px; font-size: 14px;">ğŸ“‹ ä¸€é”®å¤åˆ¶å°çº¢ä¹¦å·</button>
      `;
    }

    function generateCardFromTotal() {
      const total = parseFloat(document.getElementById("totalEstimate").value);
      if (isNaN(total) || total < 0 || total > 100) {
        alert("è¯·è¾“å…¥æœ‰æ•ˆçš„æ€»é¢„ä¼°åˆ†");
        return;
      }
      const X = 100 - total;
      const finalScore = 0.7 * (140 - X);
      const roundedScore = Math.round(finalScore * 10) / 10;
      const card = document.getElementById("card");
      card.style.display = "block";
      card.innerHTML = `
        <h2>ğŸ“ æˆ‘çš„ä¸“å…«ç„å­¦ä¼°åˆ†å¡</h2>
        <p>æ€»é¢„ä¼°åˆ†ï¼š${total} / 100</p>
        <hr>
        <h3>ğŸ“Š é¢„æµ‹æœ€ç»ˆæˆç»©ï¼š${roundedScore}</h3>
        <p style="font-size: 12px; color: #999; margin-top: 10px;">ä½œè€…ï¼šæ›¦æ›¦ ï½œ å°çº¢ä¹¦å·ï¼š604003678 ï¼ˆåˆ†äº«èµ„æ–™Freeï¼‰</p>
        <button onclick="copyXHS()" style="margin-top: 8px; font-size: 14px;">ğŸ“‹ ä¸€é”®å¤åˆ¶å°çº¢ä¹¦å·</button>
      `;
    }

    function copyXHS() {
      const text = "604003678";
      navigator.clipboard.writeText(text).then(() => {
        alert("å°çº¢ä¹¦å·å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼");
      }, () => {
        alert("å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶ï¼š604003678");
      });
    }
  </script>
</body>
</html>
